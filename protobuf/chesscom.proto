syntax = "proto3";

option csharp_namespace = "ChessCom";

package chesscom;

// Defines the service
service ChessCom {
    // Function invoked to send the request
    rpc sendRequest (MathRequest) returns (MathReply) {}
	rpc Login(LoginForm) returns (LoginResult) {}
	rpc LookForMatch(UserIdentity) returns (LookForMatchResult) {}
	rpc Match(stream MovePacket) returns (stream MoveResult) {}
}

enum MatchEvent {
	Non = 0;
	WhiteWin = 1;
	BlackWin = 2;
	Draw = 3;
}

message Move {
	string from = 2;
	string to = 3;
}

message LoginForm {
	string username = 1;
}

message LoginResult {
	bool successfullLogin = 1;
	string userToken = 2;
}

message UserIdentity {
	string userToken = 1;
}

message LookForMatchResult {
	bool succes = 1;
	string matchToken = 2;
	bool isWhitePlayer = 3;
}

message MovePacket{
	bool doingMove = 1;
	Move move = 2;
	bool askingForDraw = 4;
	MatchEvent cheatMatchEvent = 5;
}
message MoveResult{
	bool moveHappned = 1;
	Move move = 2;
	bool opponentAskingForDraw = 4;
}

// The request message containing requested numbers
message MathRequest {
    int32 a = 1;
    int32 b = 2;
}

// The response message containing response
message MathReply {
    int32 result = 1;
}
